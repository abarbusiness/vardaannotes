<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 13: Oscillations - Vardaan Master Notes</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>MathJax = { tex: { inlineMath: [['$', '$']] }, chtml: { scale: 1.05 } };</script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Palette adapted from Master Notes */
            --paper-color: #ffffff;
            --ink-color: #2c3e50;
            --highlight-yellow: #fff9c4;
            --highlight-green: #e8f5e9;
            --highlight-pink: #fce4ec;
            --highlight-blue: #e3f2fd;
            --accent-red: #c62828;
            --accent-blue: #1565c0;
            --accent-purple: #7b1fa2;
            --box-border: #333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        body {
            background-color: #fff;
            color: var(--ink-color);
            font-family: 'Outfit', sans-serif;
            line-height: 1.7;
            /* Breathable spacing */
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            /* Force vertical stacking */
            align-items: center;
            min-height: 100vh;
        }

        html {
            transition: filter .3s
        }

        html.dark-mode {
            filter: invert(1) hue-rotate(180deg)
        }

        /* Watermark */
        .watermark-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            z-index: 9999
        }

        .watermark-image {
            width: 600px;
            max-width: 80%;
            opacity: 0.11;
        }

        html.dark-mode .watermark-image {
            opacity: 0.08 !important
        }

        /* Paper Sheet */
        .paper-sheet {
            width: 210mm;
            max-width: 100%;
            min-height: 297mm;
            background-color: var(--paper-color);
            padding: 20mm;
            box-sizing: border-box;
            position: relative;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #f0f0f0;
            border: none;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        html.dark-mode .theme-toggle {
            filter: invert(1) hue-rotate(180deg);
            background: #e0e0e0;
        }

        .icon-sun,
        .icon-moon {
            position: absolute;
            transition: all 0.5s ease;
        }

        .icon-sun {
            opacity: 0;
            transform: scale(0.5) rotate(-90deg);
        }

        html.dark-mode .icon-moon {
            opacity: 0;
            transform: scale(0.5) rotate(90deg);
        }

        html.dark-mode .icon-sun {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }

        /* Typography & Header */

        /* New Header Classes */
        .header-institute {
            margin-bottom: 20px;
            color: #555;
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            text-align: center;
        }

        .header-title {
            margin-top: 5px;
            margin-bottom: 15px;
            color: #000;
            font-size: 2.2rem;
            font-weight: 800;
            white-space: nowrap;
            text-align: center;
        }

        .header-subtitle {
            text-align: center;
            font-size: 1em;
            color: #555;
            font-weight: 500;
            padding: 5px;
            margin-bottom: 40px;
            font-style: italic;
        }

        /* Section Headings */
        h1 {
            /* Fallback for regular H1 */
            text-align: center;
            font-size: 2.5rem;
            color: #2e7d32;
            text-transform: uppercase;
            border-bottom: 4px solid #333;
            padding-bottom: 15px;
            margin: 30px 0;
            font-weight: 700;
        }

        h2 {
            color: var(--accent-blue);
            border-bottom: 3px solid var(--accent-blue);
            padding-bottom: 5px;
            margin-top: 50px;
            font-size: 1.8rem;
            font-weight: 600;
            page-break-before: always;
            /* Force new page for new sections */
        }

        h2:first-of-type {
            page-break-before: auto;
            /* Don't break the first heading */
        }

        h3 {
            color: var(--accent-red);
            margin-top: 35px;
            font-size: 1.4rem;
            border-left: 5px solid var(--accent-red);
            padding-left: 10px;
            display: block;
            font-weight: 600;
        }

        strong,
        b {
            color: #c62828;
        }

        li::marker {
            color: #1565c0;
            font-weight: bold;
        }

        p,
        li {
            margin-bottom: 15px;
        }

        ul,
        ol {
            padding-left: 20px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            margin: 25px 0;
            /* More space */
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        th {
            background-color: #333;
            color: white;
            padding: 12px;
            text-align: center;
            border: 1px solid #333;
        }

        td {
            border-bottom: 1px solid #ccc;
            border-right: 1px solid #ccc;
            padding: 12px;
            vertical-align: middle;
            text-align: center;
        }

        /* Boxes Mapping */

        /* definition-box -> reasoning-box style */
        .definition-box {
            border: 2px solid #4a148c;
            background-color: #f3e5f5;
            padding: 20px;
            /* Increased padding */
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* rule-box -> highlight-box box-yellow style */
        .rule-box {
            border: 2px solid #fbc02d;
            background-color: var(--highlight-yellow);
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
            /* The POP shadow */
        }

        /* derivation-box -> process-box style */
        .derivation-box {
            border: 3px solid #333;
            border-radius: 10px;
            background-color: #fff;
            padding: 25px;
            margin: 30px 0;
            position: relative;
            box-shadow: 4px 4px 0px #eee;
            /* Subtle depth */
        }

        .derivation-box::after {
            content: "DERIVATION";
            position: absolute;
            top: -15px;
            right: 20px;
            background: #333;
            color: #fff;
            padding: 4px 12px;
            font-size: 0.85em;
            font-weight: bold;
            border-radius: 4px;
            letter-spacing: 1px;
        }

        /* practice-box -> practice-zone style */
        .practice-box {
            border: 2px dashed #2e7d32;
            background-color: #e8f5e9;
            padding: 60px 20px 20px 20px;
            /* Increased top padding for 2-line headers */
            margin: 35px 0;
            border-radius: 10px;
            position: relative;
            break-inside: avoid;
            page-break-inside: avoid;
            /* Prevent splitting in columns/pages */
        }

        .practice-header {
            background-color: #2e7d32;
            color: #fff !important;
            /* Force white text */
            padding: 5px 15px;
            position: absolute;
            top: -15px;
            left: 20px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1.1em;
            display: inline-block;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* formula-box -> exam-key style */
        .formula-box {
            border: 2px solid #e65100;
            background-color: #fff3e0;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
            position: relative;
            box-shadow: none;
        }

        .formula-box::before {
            content: "📝 FORMULA";
            font-weight: bold;
            display: block;
            margin-bottom: 12px;
            color: #e65100;
            text-align: center;
            border-bottom: 1px dashed #e65100;
            padding-bottom: 5px;
        }

        .formula-box::after {
            content: none;
        }

        /* Highlight Formula */
        .highlight-formula {
            background-color: #fff;
            border: 2px solid #7b1fa2;
            border-radius: 6px;
            padding: 12px 18px;
            margin: 15px 0;
            display: inline-block;
            font-weight: bold;
            color: #4a148c;
            box-shadow: 2px 2px 0px rgba(123, 31, 162, 0.2);
        }

        /* analysis-box (New one in Physics, map to Blue box) */
        .analysis-box {
            background-color: var(--highlight-blue);
            border: 2px solid #1976d2;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
        }

        /* Placeholders & Images */
        .img-container,
        .image-placeholder {
            width: 100%;
            margin: 25px 0;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .image-placeholder {
            height: 250px;
            background: #fcfcfc;
            border: 2px dashed #bbb;
            color: #666;
            padding: 1rem;
            border-radius: 8px;
        }

        .image-placeholder span,
        .img-caption {
            font-size: 0.95rem;
            margin-top: 12px;
            font-style: italic;
            color: #444;
            font-weight: 500;
        }

        /* Diagram Container */
        .diagram-container {
            text-align: center;
            margin: 30px 0;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
        }

        @media print {
            .theme-toggle {
                display: none !important;
            }

            .paper-sheet {
                box-shadow: none;
                margin: 0;
                width: 100%;
                padding: 0;
            }

            body {
                background-color: white !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }

            h2 {
                page-break-before: always;
            }

            h2:first-of-type {
                page-break-before: auto;
            }
        }

        @media (max-width: 820px) {
            .paper-sheet {
                width: 100%;
                padding: 15px;
            }

            body {
                padding: 0;
            }

            .header-title {
                font-size: 1.8rem;
                white-space: normal;
            }

            .header-institute {
                font-size: 0.8rem;
            }

            .watermark-image {
                width: 100%;
                max-width: 90%;
            }

            .practice-header {
                position: static;
                display: block;
                width: 100%;
                margin: 0 0 15px 0;
                text-align: center;
            }

            .practice-box {
                padding-top: 15px;
            }
        }
    </style>
</head>

<body>
    <div class="watermark-overlay"><img
            src="https://res.cloudinary.com/dxwszplz7/image/upload/v1765105606/VARDAAN_watermark_jxdqqb.jpg"
            class="watermark-image"></div>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle Theme">
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>

    <div class="paper-sheet">
        <h1 class="header-institute">VARDAAN LEARNING INSTITUTE <span style="margin: 0 10px; color: #ccc;">|</span>
            POWERED BY VARDAAN COMET</h1>
        <h2 class="header-title">Oscillations</h2>
        <p class="header-subtitle">CBSE Class 11 Physics • Chapter 13</p>

        <div class="rule-box">
            <p><strong>Chapter Overview</strong></p>
            <p>This chapter covers the fundamental concepts of <strong>Oscillations</strong>. Ensure you understand the
                definitions and derivations thoroughly.</p>
        </div>


        <!-- 13.1 Introduction -->
        <h2>13.1 Periodic & Oscillatory Motions</h2>
        <div class="definition-box">
            <ul>
                <li><strong>Periodic Motion:</strong> Motion that repeats itself at regular intervals of time. (e.g.,
                    Motion of planets around the Sun, Uniform Circular Motion).</li>
                <li><strong>Oscillatory (Vibratory) Motion:</strong> A specific type of periodic motion where the body
                    moves to and fro (back and forth) about a fixed point called the <em>mean position</em> or
                    <em>equilibrium position</em>.
                </li>
                <li><strong>Condition:</strong> Every oscillatory motion is periodic, but every periodic motion is not
                    oscillatory.</li>
                <li><strong>Period (T):</strong> The smallest interval of time after which the motion repeats. Unit:
                    Seconds (s).</li>
                <li><strong>Frequency ($\nu$ or $f$):</strong> The number of oscillations completed per unit time. $\nu
                    = \frac{1}{T}$. Unit: Hertz (Hz) or $s^{-1}$.</li>
                <li><strong>Angular Frequency ($\omega$):</strong> $\omega = 2\pi\nu = \frac{2\pi}{T}$. Unit: rad/s.
                </li>
            </ul>

            <div class="diagram-container">
                <svg viewBox="0 0 800 250">
                    <!-- Panel (a) Insect on Wall -->
                    <g transform="translate(50, 20)">
                        <text x="75" y="0" font-weight="bold" font-size="14" text-anchor="middle" fill="#333">(a) Insect
                            Climbing</text>
                        <rect x="50" y="20" width="50" height="180" fill="#e0e0e0" stroke="#333" />
                        <line x1="50" y1="20" x2="50" y2="200" stroke="#333" stroke-width="2" />
                        <circle cx="50" cy="150" r="6" fill="#d32f2f" />
                        <!-- Arrows -->
                        <path d="M 30 160 Q 10 130 30 100" fill="none" stroke="#d32f2f" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <path d="M 30 90 Q 45 120 30 150" fill="none" stroke="#333" stroke-width="2"
                            stroke-dasharray="4" marker-end="url(#arrow)" />
                    </g>

                    <!-- Panel (b) Child on Steps -->
                    <g transform="translate(300, 20)">
                        <text x="100" y="0" font-weight="bold" font-size="14" text-anchor="middle" fill="#333">(b) Child
                            on Steps</text>
                        <!-- Steps -->
                        <path d="M 20 200 L 60 200 L 60 160 L 100 160 L 100 120 L 140 120 L 140 80 L 180 80" fill="none"
                            stroke="#333" stroke-width="2" />
                        <circle cx="100" cy="110" r="8" fill="#1976d2" />
                        <!-- Arrows -->
                        <line x1="115" y1="110" x2="130" y2="90" stroke="#1976d2" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <line x1="85" y1="110" x2="70" y2="150" stroke="#333" stroke-width="2" stroke-dasharray="4"
                            marker-end="url(#arrow)" />
                    </g>

                    <!-- Panel (c) Bouncing Ball -->
                    <g transform="translate(550, 20)">
                        <text x="100" y="0" font-weight="bold" font-size="14" text-anchor="middle" fill="#333">(c)
                            Bouncing Ball</text>
                        <line x1="20" y1="200" x2="180" y2="200" stroke="#333" stroke-width="3" />
                        <path d="M 40 200 Q 70 20 100 200 Q 130 80 160 200" fill="none" stroke="#333"
                            stroke-dasharray="4" />
                        <circle cx="100" cy="50" r="10" fill="#388e3c" />
                        <line x1="100" y1="60" x2="100" y2="180" stroke="#388e3c" stroke-width="2"
                            marker-end="url(#arrow)" />
                    </g>

                    <defs>
                        <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                            <path d="M0,0 L0,6 L6,3 z" fill="#333" />
                        </marker>
                    </defs>
                </svg>
                <p class="img-caption">Figure 13.1: Examples of Periodic Motion (a) Insect climbing wall (b) Child
                    climbing step (c) Ball bouncing.</p>
            </div>

            <hr style="margin: 1rem 0; border: 0; border-top: 1px solid #ccc;">
            <p><strong>Periodic Functions:</strong></p>
            <p>Mathematical functions that repeat their values at regular intervals.</p>
            <p>$f(t) = f(t + T)$.</p>
            <p><strong>Examples:</strong> $\sin \omega t$ and $\cos \omega t$ are the simplest periodic functions with
                period $T = 2\pi/\omega$.</p>
            <p>Any periodic function can be expressed as a superposition of sine and cosine functions (Fourier Theorem).
            </p>

            <div class="analysis-box" style="background:#f3e5f5; border-left: 4px solid #9c27b0;">
                <p><strong>NCERT Focus: Identifying Motion Types (Example 13.3)</strong></p>
                <p><strong>Q:</strong> Which functions represent Periodic or SHM?</p>
                <ul>
                    <li><strong>(i) $\sin \omega t - \cos \omega t$:</strong> <br>
                        $= \sqrt{2} \sin(\omega t - \pi/4)$. Represents <strong>SHM</strong> with Period $2\pi/\omega$.
                    </li>
                    <li><strong>(ii) $\sin^3 \omega t$:</strong> <br>
                        $= \frac{1}{4}(3\sin \omega t - \sin 3\omega t)$. Represents <strong>Periodic Motion</strong>
                        but NOT SHM (it's a combo of two SHMs).</li>
                    <li><strong>(iii) $e^{-\omega t}$:</strong> <br>
                        Decreases monotonically. Represents <strong>Non-Periodic Motion</strong>.</li>
                </ul>
            </div>
        </div>

        <div class="practice-box">
            <span class="practice-header">Topic Practice: Periodic Motion</span>
            <p><strong>Q1:</strong> Check if $\sin^2 \omega t$ represents periodic motion. If yes, find its period.</p>
            <p><strong>Ans:</strong> $\sin^2 \omega t = \frac{1 - \cos 2\omega t}{2}$. It involves $\cos 2\omega t$,
                which is periodic. <br>
                Angular frequency is $2\omega$. <br>
                Period $T' = \frac{2\pi}{2\omega} = \frac{\pi}{\omega} = \frac{T}{2}$. Yes, it is periodic.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> A human heart beats 75 times in a minute. Calculate its frequency and period.</p>
            <p><strong>Ans:</strong> Frequency $f = \frac{75}{60} = 1.25 \text{ Hz}$. <br>
                Period $T = \frac{1}{f} = \frac{1}{1.25} = 0.8 \text{ s}$.</p>
        </div>

        <!-- 13.2 SHM -->
        <h2>13.2 Simple Harmonic Motion (SHM)</h2>
        <div class="derivation-box">
            <p><strong>Definition:</strong> SHM is the simplest form of oscillatory motion where the restoring force is
                directly proportional to the displacement from the mean position and acts always towards the mean
                position.</p>
            <div class="highlight-formula">$$ F = -k x $$</div>
            <p>Where $k$ is the Force Constant (or Spring Constant). Unit: N/m.</p>

            <p><strong>Types of SHM:</strong></p>
            <ul>
                <li><strong>Linear SHM:</strong> Particle oscillates along a straight line about a fixed point (e.g.,
                    Spring-Mass system). Restoring force depends on linear displacement $x$.</li>
                <li><strong>Angular SHM:</strong> Particle oscillates along a curved path (arc) about a fixed axis
                    (e.g., Simple Pendulum). Restoring torque depends on angular displacement $\theta$. $\tau =
                    -C\theta$.</li>
            </ul>

            <p><strong>Differential Equation of SHM:</strong></p>
            <p>From Newton's 2nd Law: $F = ma = m \frac{d^2x}{dt^2}$.</p>
            <p>$m \frac{d^2x}{dt^2} = -kx \Rightarrow \frac{d^2x}{dt^2} + \frac{k}{m}x = 0$</p>
            <p>Putting $\frac{k}{m} = \omega^2$, we get:</p>
            <div class="highlight-formula">$$ \frac{d^2x}{dt^2} + \omega^2 x = 0 $$</div>

            <p><strong>Displacement Equation:</strong> The solution to the above DE is:</p>
            <div class="highlight-formula">$$ x(t) = A \cos(\omega t + \phi) $$</div>
            <ul>
                <li>$x(t)$: Displacement at time $t$.</li>
                <li>$A$: Amplitude (Maximum displacement from mean position).</li>
                <li>$(\omega t + \phi)$: Phase of the oscillator (state of motion).</li>
                <li>$\phi$ or $\phi_0$: Phase Constant or Initial Phase (at $t=0$).</li>
            </ul>

            <!-- Figure 13.3: Displacement-Time Graph -->
            <div class="diagram-container" style="text-align: center;">
                <img src="Imges/displacement vs time graph.jpg" alt="Displacement vs Time Graph"
                    style="max-width: 60%; width: 100%;">
                <p class="img-caption">Figure 13.3: Displacement-Time Graph $x(t)$ for Simple Harmonic Motion.</p>
            </div>
            <div class="diagram-container">
                <svg viewBox="0 0 400 200">
                    <!-- Bowl -->
                    <path d="M 50 50 A 150 150 0 0 0 350 50" fill="none" stroke="#e0e0e0" stroke-width="4"
                        stroke-linecap="round" />
                    <!-- Inner Bowl Surface -->
                    <path d="M 60 60 A 140 140 0 0 0 340 60" fill="none" stroke="#e3f2fd" stroke-width="2" />

                    <!-- Ball -->
                    <circle id="anim_bowl_ball" cx="200" cy="200" r="15" fill="#7b1fa2" />

                    <!-- Arrow -->
                    <path id="anim_bowl_arrow" d="M 280 130 A 130 130 0 0 0 200 190" fill="none" stroke="#333"
                        stroke-width="2" marker-end="url(#arrow)" />
                    <text id="anim_bowl_force_label" x="210" y="150" font-size="12" fill="#333"
                        font-weight="bold">Restoring Force</text>

                    <!-- Mean Position -->
                    <line x1="200" y1="200" x2="200" y2="220" stroke="#333" stroke-dasharray="2" />
                    <text x="190" y="235" font-size="12">Mean Position</text>
                </svg>
                <p class="img-caption">Figure 13.10: Circular motion of a ball in a glass bowl (Analogy for SHM).</p>
            </div>
        </div>

        <!-- 13.2.1 Geometric Interpretation (UCM) -->
        <h3>Geometric Interpretation of SHM (Uniform Circular Motion)</h3>
        <div class="derivation-box" style="background:#fff3e0; border-left: 4px solid #ff9800;">
            <p><strong>Reference Circle Method:</strong></p>
            <p>Simple Harmonic Motion can be visualized as the projection of Uniform Circular Motion on a diameter of
                the reference circle.</p>

            <div class="diagram-container">
                <svg viewBox="0 0 600 250">
                    <!-- Left: Reference Circle -->
                    <g transform="translate(150, 125)">
                        <title>Reference Circle</title>
                        <line x1="-120" y1="0" x2="120" y2="0" stroke="#ccc" />
                        <line x1="0" y1="-120" x2="0" y2="120" stroke="#ccc" />
                        <circle cx="0" cy="0" r="100" fill="none" stroke="#333" stroke-width="2" />
                        <!-- Particle P -->
                        <line id="anim_ucm_radius" x1="0" y1="0" x2="70.7" y2="-70.7" stroke="#333" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <circle id="anim_ucm_particle" cx="70.7" cy="-70.7" r="6" fill="#d32f2f" />
                        <text id="anim_ucm_label" x="80" y="-80" font-weight="bold" fill="#d32f2f">P</text>
                        <!-- Projection -->
                        <line id="anim_ucm_proj_line" x1="70.7" y1="-70.7" x2="70.7" y2="0" stroke="#d32f2f"
                            stroke-dasharray="4" />
                        <circle id="anim_ucm_projection" cx="70.7" cy="0" r="6" fill="#1976d2" />
                        <text x="75" y="20" font-weight="bold" fill="#1976d2">M</text>
                        <text x="-50" y="140" font-weight="bold">Reference Circle</text>
                    </g>

                    <!-- Right: Linear SHM -->
                    <g transform="translate(450, 125)">
                        <!-- Axis Line with Arrow -->
                        <line x1="-130" y1="0" x2="130" y2="0" stroke="#333" stroke-width="2"
                            marker-end="url(#arrow)" />

                        <!-- Markers & Labels -->
                        <!-- -A -->
                        <line x1="-100" y1="-5" x2="-100" y2="5" stroke="#333" />
                        <text x="-100" y="25" font-size="12" text-anchor="middle" font-weight="bold">-A</text>

                        <!-- Mean Position (O) -->
                        <line x1="0" y1="-5" x2="0" y2="5" stroke="#333" />
                        <text x="0" y="25" font-size="12" text-anchor="middle" font-weight="bold">Mean</text>

                        <!-- +A -->
                        <line x1="100" y1="-5" x2="100" y2="5" stroke="#333" />
                        <text x="100" y="25" font-size="12" text-anchor="middle" font-weight="bold">+A</text>

                        <!-- Particle -->
                        <circle id="anim_shm_particle" cx="70.7" cy="0" r="8" fill="#1976d2" />

                        <!-- Velocity Vector -->
                        <line id="anim_shm_vector" x1="70.7" y1="0" x2="40" y2="0" stroke="#d32f2f" stroke-width="2"
                            marker-end="url(#arrow)" />

                        <text x="0" y="-40" font-weight="bold" text-anchor="middle" fill="#555">Linear SHM</text>
                    </g>

                    <!-- Connection -->
                    <path id="anim_connection_line" d="M 220.7 54.3 L 520.7 125" stroke="#ccc" stroke-dasharray="2"
                        opacity="0.5" fill="none" />
                </svg>
                <p class="img-caption">Reference Circle Method (P rotates, M oscillates).</p>
            </div>

            <ul>
                <li><strong>Reference Particle (P):</strong> Moves on circle of radius $A$ with constant angular speed
                    $\omega$.</li>
                <li><strong>Projection (M):</strong> Moves on the diameter (x-axis) executing SHM.</li>
            </ul>

            <p><strong>Coordinates of Projection M:</strong></p>
            <p>$x = A \cos(\omega t + \phi)$</p>
            <p><strong>Velocity of M:</strong> x-component of P's velocity (tangential $v=A\omega$).</p>
            <p>$v(t) = -A\omega \sin(\omega t + \phi)$</p>
            <p><strong>Acceleration of M:</strong> x-component of P's acceleration (centripetal $a_c=\omega^2 A$).</p>
            <p>$a(t) = -\omega^2 A \cos(\omega t + \phi) = -\omega^2 x$.</p>
        </div>

        <div class="practice-box">
            <span class="practice-header">Topic Practice: SHM Equation</span>
            <p><strong>Q1:</strong> Which of the following functions of time represent (a) Simple Harmonic, (b) Periodic
                but not SHM, and (c) Non-periodic motion?</p>
            <ul>
                <li>(i) $\sin \omega t - \cos \omega t$</li>
                <li>(ii) $\sin^3 \omega t$</li>
                <li>(iii) $3 \cos(\pi/4 - 2\omega t)$</li>
                <li>(iv) $\cos \omega t + \cos 3\omega t + \cos 5\omega t$</li>
                <li>(v) $\exp(-\omega^2 t^2)$</li>
            </ul>
            <p><strong>Ans:</strong> (i) SHM ($T=2\pi/\omega$), (ii) Periodic ($T=2\pi/\omega$), (iii) SHM
                ($T=\pi/\omega$), (iv) Periodic ($T=2\pi/\omega$), (v) Non-periodic.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> A particle executes SHM given by $x = 5 \cos(2\pi t + \pi/4)$ in SI units. Find:
                amplitude, frequency, and initial phase.</p>
            <p><strong>Ans:</strong> Comparing with $A \cos(\omega t + \phi)$: <br>
                $A = 5 \text{ m}$ <br>
                $\omega = 2\pi \Rightarrow f = 1 \text{ Hz}$ <br>
                $\phi = \pi/4 \text{ rad}$.</p>
        </div>

        <!-- 13.3 Velocity & Acceleration -->
        <h2>13.3 Velocity & Acceleration in SHM</h2>

        <div class="diagram-container" style="margin: 0; text-align: center;">
            <img src="Imges/Force velocity acceleration combined graph with time.jpg" alt="Velocity vs Time"
                style="max-width: 80%; width: 100%;">
            <p class="img-caption">Variation of Velocity, Acceleration, and Force with Time.</p>
        </div>

        <div class="analysis-box">
            <p><strong>1. Velocity ($v$):</strong> Rate of change of displacement.</p>
            <p>$v = \frac{dx}{dt} = \frac{d}{dt}[A \cos(\omega t + \phi)] = -A\omega \sin(\omega t + \phi)$</p>
            <p>Relation with $x$: Using $\sin^2\theta + \cos^2\theta = 1$</p>
            <div class="highlight-formula">$$ v = \pm \omega \sqrt{A^2 - x^2} $$</div>
            <ul>
                <li>At Mean Position ($x=0$): $v_{max} = \pm A\omega$.</li>
                <li>At Extreme Position ($x=\pm A$): $v = 0$.</li>
            </ul>

            <p><strong>2. Acceleration ($a$):</strong> Rate of change of velocity.</p>
            <p>$a = \frac{dv}{dt} = \frac{d}{dt}[-A\omega \sin(\omega t + \phi)] = -A\omega^2 \cos(\omega t + \phi)$</p>
            <div class="highlight-formula">$$ a = -\omega^2 x $$</div>
            <ul>
                <li>At Mean Position ($x=0$): $a = 0$.</li>
                <li>At Extreme Position ($x=\pm A$): $a_{max} = \pm \omega^2 A$.</li>
            </ul>
        </div>



        <div class="practice-box">
            <span class="practice-header">Topic Practice: Velocity & Acceleration</span>
            <p><strong>Q1 (CBSE):</strong> A particle executes SHM with amplitude $A$. At what distance from the mean
                position is its speed half of its maximum speed?</p>
            <p><strong>Ans:</strong> $v = \omega \sqrt{A^2 - x^2}$ and $v_{max} = \omega A$. <br>
                Given $v = v_{max}/2 \Rightarrow \omega \sqrt{A^2 - x^2} = \frac{\omega A}{2}$. <br>
                Squaring both sides: $A^2 - x^2 = A^2/4 \Rightarrow x^2 = 3A^2/4$. <br>
                $x = \pm \frac{\sqrt{3}}{2} A$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> Maximum velocity of a particle in SHM is $\alpha$ and maximum acceleration is
                $\beta$.
                Find the time period and amplitude.</p>
            <p><strong>Ans:</strong> $v_{max} = \omega A = \alpha$ ... (1) <br>
                $a_{max} = \omega^2 A = \beta$ ... (2) <br>
                Divide (2) by (1): $\omega = \beta/\alpha$. <br>
                $T = 2\pi/\omega = 2\pi \alpha / \beta$. <br>
                From (1): $A = \alpha / \omega = \alpha / (\beta/\alpha) = \alpha^2 / \beta$.</p>
        </div>

        <!-- 13.4 Force Law -->
        <h2>13.4 Force Law & Spring Systems</h2>
        <div class="definition-box">
            <p><strong>Linear Simple Harmonic Oscillator:</strong> A system oscillating under a restoring force $F =
                -kx$.</p>
            <p><strong>Time Period:</strong> $T = 2\pi \sqrt{\frac{m}{k}}$.</p>
            <p><strong>Frequency:</strong> $\nu = \frac{1}{2\pi} \sqrt{\frac{k}{m}}$.</p>
        </div>


        <div class="diagram-container">
            <svg viewBox="0 0 600 150">
                <defs>
                    <marker id="arrow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L6,3 z" fill="#333" />
                    </marker>
                </defs>

                <!-- Wall -->
                <rect x="0" y="20" width="20" height="100" fill="#9e9e9e" stroke="#333" />
                <line x1="0" y1="120" x2="600" y2="120" stroke="#333" stroke-width="2" />

                <!-- Spring (Animated Path) -->
                <path id="anim_horiz_spring" d="M 20 70 Q 30 55 40 70 T 60 70 L 250 70" fill="none" stroke="#555"
                    stroke-width="3" />

                <!-- Mass (Animated Rect) -->
                <rect id="anim_horiz_mass" x="250" y="50" width="60" height="40" fill="#ffca28" stroke="#333"
                    stroke-width="2" />
                <text id="anim_horiz_mass_label" x="280" y="75" font-weight="bold" text-anchor="middle"
                    fill="#333">m</text>

                <!-- Equilibrium Position Marker -->
                <line x1="280" y1="110" x2="280" y2="130" stroke="#333" stroke-dasharray="4" />
                <text x="280" y="145" font-size="14" text-anchor="middle" font-weight="bold">x = 0</text>

                <!-- Amplitude Markers -->
                <line x1="360" y1="115" x2="360" y2="125" stroke="#333" />
                <text x="360" y="140" font-size="12" text-anchor="middle">+A</text>
                <line x1="200" y1="115" x2="200" y2="125" stroke="#333" />
                <text x="200" y="140" font-size="12" text-anchor="middle">-A</text>

                <!-- Motion Label -->
                <text id="anim_horiz_current_x" x="280" y="40" font-size="14" text-anchor="middle" fill="#d32f2f"
                    font-weight="bold">x(t)</text>
            </svg>

            <!-- Part (b) Graph -->
            <div style="margin-top: 10px;" id="calculator_13_2" class="desmos-container" style="height: 200px;">
            </div>
            </svg>
            <script type="application/json">
                {
                  "figureId": "13.2",
                  "panels": [
                    {
                      "label": "(a) Block attached to spring",
                      "objects": [
                        {"name": "Wall", "type": "Rect"},
                        {"name": "Spring", "type": "Coil Path"},
                        {"name": "Mass", "type": "Rect", "label": "m"},
                        {"name": "Surface", "type": "Line", "condition": "Frictionless"}
                      ]
                    },
                    {
                      "label": "(b) Displacement-time graph",
                      "graphType": "Chart.js Cosine Wave",
                      "axisX": "Time t",
                      "axisY": "Displacement x"
                    }
                  ]
                }
            </script>
            <p class="img-caption">Figure 13.2: (a) Block attached to spring (displaced). (b) Displacement-time graph.
            </p>
        </div>
        <div class="diagram-container">
            <img src="Imges/All in one graph.jpg" alt="all in one graph" style="max-width: 45vw;">
            <p class="img-caption">Figure 13.7: Initial Conditions determining $x(t)$ equation and graph.</p>
        </div>

        <div class="derivation-box" style="background:#e8f5e9; border-left: 4px solid #43a047;">
            <p><strong>Vertical Oscillations of a Spring:</strong></p>
            <div class="diagram-container">
                <svg viewBox="0 0 600 350">
                    <!-- Support -->
                    <rect x="50" y="20" width="500" height="10" fill="#333" />

                    <!-- 1. Unstretched -->
                    <g transform="translate(100, 30)">
                        <text x="0" y="-15" font-weight="bold">(1) Unstretched</text>
                        <path d="M 0 0 Q 10 10 0 20 T 0 40 T 0 60 T 0 80 T 0 100 T 0 120" fill="none" stroke="#555"
                            stroke-width="2" />
                        <line x1="20" y1="0" x2="20" y2="120" stroke="#333" stroke-dasharray="2"
                            marker-end="url(#arrow)" />
                        <text x="25" y="60">l<tspan baseline-shift="sub" font-size="0.7em">0</tspan></text>
                        <line x1="-20" y1="120" x2="20" y2="120" stroke="#999" stroke-dasharray="4" />
                        <text x="-40" y="125" font-size="10">Natural Length</text>
                    </g>

                    <!-- 2. Equilibrium -->
                    <g transform="translate(300, 30)">
                        <text x="0" y="-15" font-weight="bold">(2) Equilibrium</text>
                        <path d="M 0 0 Q 10 15 0 30 T 0 60 T 0 90 T 0 120 T 0 150 T 0 180" fill="none" stroke="#555"
                            stroke-width="2" />
                        <!-- Mass -->
                        <rect x="-20" y="180" width="40" height="40" fill="#ffca28" stroke="#333" />
                        <text x="-5" y="205" font-weight="bold">m</text>

                        <!-- Forces -->
                        <line x1="0" y1="180" x2="0" y2="140" stroke="#1976d2" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <text x="5" y="150" fill="#1976d2" font-size="10">k(l<tspan baseline-shift="sub"
                                font-size="0.7em">0
                            </tspan>)</text>
                        <line x1="0" y1="220" x2="0" y2="260" stroke="#d32f2f" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <text x="5" y="250" fill="#d32f2f" font-size="10">mg</text>

                        <!-- Extension l0 -->
                        <line x1="-40" y1="120" x2="-40" y2="180" stroke="#333" stroke-dasharray="2"
                            marker-end="url(#arrow)" />
                        <text x="-55" y="150">l<tspan baseline-shift="sub" font-size="0.7em">0</tspan></text>
                        <line x1="-60" y1="180" x2="40" y2="180" stroke="#999" stroke-dasharray="4" />
                        <text x="-90" y="185" font-size="10">Equilibrium</text>
                    </g>

                    <!-- 3. Displaced -->
                    <g transform="translate(500, 30)">
                        <text x="0" y="-15" font-weight="bold">(3) Displaced</text>
                        <path id="anim_spring_path" d="M 0 0 Q 10 20 0 40 T 0 80 T 0 120 T 0 160 T 0 200 T 0 240"
                            fill="none" stroke="#555" stroke-width="2" />
                        <!-- Mass -->
                        <rect id="anim_spring_mass" x="-20" y="240" width="40" height="40" fill="#ffca28"
                            stroke="#333" />
                        <text id="anim_spring_mass_label" x="-5" y="265" font-weight="bold">m</text>

                        <!-- Forces -->
                        <line id="anim_spring_force_k" x1="0" y1="240" x2="0" y2="180" stroke="#1976d2" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <text x="5" y="200" fill="#1976d2" font-size="10">k(l<tspan baseline-shift="sub"
                                font-size="0.7em">0
                            </tspan>+y)</text>
                        <line x1="0" y1="280" x2="0" y2="320" stroke="#d32f2f" stroke-width="2"
                            marker-end="url(#arrow)" />
                        <text x="5" y="310" fill="#d32f2f" font-size="10">mg</text>

                        <!-- Displacement y -->
                        <line x1="-40" y1="180" x2="-40" y2="240" stroke="#333" stroke-dasharray="2"
                            marker-end="url(#arrow)" />
                        <text x="-55" y="210">y</text>
                    </g>
                </svg>
                <p class="img-caption">Figure: Vertical Spring System in Unstretched, Equilibrium, and Displaced states.
                </p>
            </div>

            <p><strong>Equilibrium Position:</strong> Weight balances spring force.</p>
            <p>$k l_0 = mg$ (where $l_0$ is extension at equilibrium).</p>

            <p><strong>Displaced Position:</strong> Pulled down by distance $y$.</p>
            <p>Total extension = $l_0 + y$.</p>
            <p>Restoring Force $F = mg - k(l_0 + y)$.</p>
            <p>$F = mg - k l_0 - ky$. (Since $mg = k l_0$).</p>
            <p>$F = -ky$.</p>
            <p>This is SHM condition. Thus, Time Period is same as horizontal spring:</p>
            <div class="highlight-formula">$$ T = 2\pi \sqrt{\frac{m}{k}} $$</div>
        </div>

        <div class="derivation-box">
            <p><strong>Combinations of Springs:</strong></p>

            <p><strong>1. Springs in Parallel:</strong> (Both springs pulled by deduction)</p>
            <div class="diagram-container">
                <svg viewBox="0 0 400 250">
                    <rect x="50" y="20" width="300" height="10" fill="#333" />
                    <!-- Parallel Springs -->
                    <g transform="translate(150, 30)">
                        <!-- Spring k1 -->
                        <path d="M -40 0 Q -30 10 -40 20 T -40 40 T -40 60 T -40 80 T -40 100 T -40 120" fill="none"
                            stroke="#555" stroke-width="2" />
                        <text x="-70" y="60" font-weight="bold">k1</text>
                        <!-- Spring k2 -->
                        <path d="M 40 0 Q 50 10 40 20 T 40 40 T 40 60 T 40 80 T 40 100 T 40 120" fill="none"
                            stroke="#555" stroke-width="2" />
                        <text x="50" y="60" font-weight="bold">k2</text>

                        <!-- Connecting Bar/Mass -->
                        <rect x="-80" y="120" width="160" height="50" fill="#ffca28" stroke="#333" />
                        <text x="-5" y="150" font-weight="bold">m</text>

                        <!-- Force F -->
                        <line x1="0" y1="170" x2="0" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
                        <text x="10" y="200" font-weight="bold">F</text>
                    </g>
                </svg>
                <p class="img-caption">Figure: Springs in Parallel (Side-by-side).</p>
            </div>
            <p>If two springs $k_1$ and $k_2$ are connected such that extension ($x$) is same for both.</p>
            <p>$F_{total} = F_1 + F_2 = -(k_1 x) - (k_2 x) = -(k_1 + k_2)x$.</p>
            <div class="highlight-formula">$$ k_{eq} = k_1 + k_2 $$</div>
            <p>$T_{par} = 2\pi \sqrt{\frac{m}{k_1 + k_2}}$.</p>

            <p style="margin-top:10px"><strong>2. Springs in Series:</strong> (End to end)</p>
            <div class="diagram-container">
                <svg viewBox="0 0 400 350">
                    <rect x="100" y="20" width="200" height="10" fill="#333" />
                    <!-- Series Springs -->
                    <g transform="translate(200, 30)">
                        <!-- Spring k1 -->
                        <path d="M 0 0 Q 10 10 0 20 T 0 40 T 0 60 T 0 80 T 0 100" fill="none" stroke="#555"
                            stroke-width="2" />
                        <text x="-30" y="50" font-weight="bold">k1</text>

                        <!-- Connector point -->
                        <circle cx="0" cy="100" r="3" fill="#333" />

                        <!-- Spring k2 -->
                        <path d="M 0 100 Q 10 110 0 120 T 0 140 T 0 160 T 0 180 T 0 200" fill="none" stroke="#555"
                            stroke-width="2" />
                        <text x="-30" y="150" font-weight="bold">k2</text>

                        <!-- Mass -->
                        <rect x="-25" y="200" width="50" height="50" fill="#ffca28" stroke="#333" />
                        <text x="-10" y="230" font-weight="bold">m</text>

                        <!-- Force F -->
                        <line x1="0" y1="250" x2="0" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
                        <text x="10" y="280" font-weight="bold">F</text>
                    </g>
                </svg>
                <p class="img-caption">Figure: Springs in Series (End-to-End).</p>
            </div>
            <p>Force $F$ is same in both springs. Extensions are $x_1$ and $x_2$. Total extension $x = x_1 + x_2$.</p>
            <p>$x_1 = -F/k_1$, $x_2 = -F/k_2$.</p>
            <p>$x = -F(\frac{1}{k_1} + \frac{1}{k_2})$. Also $x = -F/k_{eq}$.</p>
            <div class="highlight-formula">$$ \frac{1}{k_{eq}} = \frac{1}{k_1} + \frac{1}{k_2} $$</div>
            <p>$T_{ser} = 2\pi \sqrt{m(\frac{1}{k_1} + \frac{1}{k_2})} = 2\pi \sqrt{\frac{m(k_1+k_2)}{k_1 k_2}}$.</p>
        </div>

        <div class="practice-box">
            <span class="practice-header">Topic Practice: Spring Systems</span>
            <p><strong>Q1:</strong> Two identical springs of spring constant $k$ are attached to a block of mass $m$ and
                to
                fixed supports as shown. (a) Series (b) Parallel. Find the ratio of their Time Periods.</p>
            <p><strong>Ans:</strong> (a) Series: $k_{eq} = k/2$. $T_s = 2\pi \sqrt{2m/k}$. <br>
                (b) Parallel: $k_{eq} = 2k$. $T_p = 2\pi \sqrt{m/2k}$. <br>
                Ratio $T_s / T_p = \sqrt{2}/\sqrt{1/2} = \sqrt{4} = 2:1$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> A spring with force constant $k$ is cut into two equal halves. What is the spring
                constant of each half?</p>
            <p><strong>Ans:</strong> Spring constant is inversely proportional to length ($k \propto 1/L$). <br>
                If length becomes $L/2$, force constant becomes $2k$. So, each half has stiffness $2k$.</p>
        </div>

        <!-- 13.5 Energy -->
        <h2>13.5 Energy in SHM</h2>
        <!-- Energy vs Time Graphs -->
        <!-- Energy Graphs: Side-by-Side Comparison -->
        <h3 style="margin-top: 20px;">Comparison of Energy Variations</h3>
        <div style="margin-bottom: 30px;">
            <!-- Kinetic Energy -->
            <h4 style="text-align: center; margin-top: 20px;">1. Kinetic Energy (K)</h4>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/kinetic energy vs time graph.jpg" alt="KE vs Time" style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Kinetic Energy vs Time (t)</p>
            </div>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/kinetic energy vs x graph.jpg" alt="KE vs Position"
                    style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Kinetic Energy vs Position (x)</p>
            </div>

            <!-- Potential Energy -->
            <h4 style="text-align: center; margin-top: 30px;">2. Potential Energy (U)</h4>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/potential energy vs t graph.jpg" alt="PE vs Time" style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Potential Energy vs Time (t)</p>
            </div>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/potential energy vs x graph.jpg" alt="PE vs Position"
                    style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Potential Energy vs Position (x)</p>
            </div>

            <!-- Total Energy -->
            <h4 style="text-align: center; margin-top: 30px;">3. Total Energy (E)</h4>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/total energy vs time.jpg" alt="TE vs Time" style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Total Energy vs Time (t)</p>
            </div>
            <div class="diagram-container" style="margin: 10px 0; text-align: center;">
                <img src="Imges/total energy vs displacement.jpg" alt="TE vs Position"
                    style="max-width: 90%; width: 100%;">
                <p class="img-caption" style="font-size: 0.8rem;">Total Energy vs Position (x)</p>
            </div>
        </div>


        <!-- Combined Energy Graph -->
        <div class="diagram-container" style="text-align: center;">
            <img src="Imges/kinetic energy potential energy and total energy combined graph.jpg"
                alt="Combined Energy Graph" style="max-width: 60%; width: 100%;">
            <p class="img-caption">Figure 13.5: Combined Plot of Kinetic, Potential, and Total Energy.</p>
        </div>

        <div class="derivation-box">
            <p><strong>1. Potential Energy ($U$):</strong> Work done against restoring force $F = -kx$.</p>
            <p>$dW = -F dx = -(-kx)dx = kx dx$.</p>
            <p>$U = \int_0^x kx' dx' = \frac{1}{2} k x^2$.</p>
            <p>Using $x = A \cos(\omega t + \phi)$:</p>
            <div class="highlight-formula">$$ U = \frac{1}{2} m \omega^2 A^2 \cos^2(\omega t + \phi) $$</div>

            <p><strong>2. Kinetic Energy ($K$):</strong> $K = \frac{1}{2} m v^2$.</p>
            <p>Using $v = -A\omega \sin(\omega t + \phi)$:</p>
            <div class="highlight-formula">$$ K = \frac{1}{2} m \omega^2 A^2 \sin^2(\omega t + \phi) $$</div>

            <p><strong>3. Total Mechanical Energy ($E$):</strong></p>
            <p>$E = K + U = \frac{1}{2} m \omega^2 A^2 (\sin^2 \theta + \cos^2 \theta)$.</p>
            <div class="highlight-formula">$$ E = \frac{1}{2} k A^2 = \text{Constant} $$</div>
            <p>At Mean Position ($x=0$): $U=0, K=E$. At Extreme ($x=\pm A$): $U=E, K=0$.</p>
        </div>



        <div class="practice-box">
            <span class="practice-header">Topic Practice: Energy in SHM</span>
            <p><strong>Q1:</strong> At what position from the mean is the Potential Energy equal to half the Total
                Energy?
            </p>
            <p><strong>Ans:</strong> $U = E/2 \Rightarrow \frac{1}{2} k x^2 = \frac{1}{2} (\frac{1}{2} k A^2)$. <br>
                $x^2 = A^2/2 \Rightarrow x = \pm A/\sqrt{2}$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> Plot the graph of Potential Energy and Kinetic Energy with respect to time for one
                complete oscillation.</p>
            <p><strong>Hint:</strong> Use the graph provided in Figure 13.5. Note that PE is max at extremes (t=T/4,
                3T/4)
                and KE is max at mean (t=0, T/2, T).</p>
        </div>

        <!-- 13.6 Simple Pendulum -->
        <h2>13.6 The Simple Pendulum</h2>
        <div class="diagram-container">
            <svg viewBox="0 0 600 380">
                <defs>
                    <marker id="arrowBlue" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L6,3 z" fill="#1e88e5" />
                    </marker>
                    <marker id="arrowRed" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L6,3 z" fill="#d32f2f" />
                    </marker>
                </defs>

                <!-- Support -->
                <rect x="250" y="20" width="100" height="10" fill="#333" />
                <!-- Vertical Reference Line from Pivot -->
                <line x1="300" y1="30" x2="300" y2="250" stroke="#ccc" stroke-dasharray="4" />

                <!-- Equilibrium Bob (Ghost) -->
                <circle cx="300" cy="250" r="10" fill="none" stroke="#ccc" opacity="0.5" />

                <!-- Displaced String -->
                <line x1="300" y1="30" x2="400" y2="200" stroke="#333" stroke-width="2" />

                <!-- Angle Theta (Top) -->
                <!-- Arc from vertical (300, 80) to string -->
                <path d="M 300 90 A 60 60 0 0 0 330 82" fill="none" stroke="#333" />
                <text x="310" y="110" font-family="Arial" font-size="20" font-weight="bold">&#x03B8;</text>

                <!-- Displaced Bob -->
                <circle cx="400" cy="200" r="15" fill="#d32f2f" />

                <!-- Forces Resolution Geometry -->
                <!-- mg Vector (Vertical Down) -->
                <!-- Tip at (400, 320). Length 120. -->
                <line x1="400" y1="200" x2="400" y2="320" stroke="#1e88e5" stroke-width="2"
                    marker-end="url(#arrowBlue)" />
                <text x="405" y="335" fill="#1e88e5" font-weight="bold" font-size="14">mg</text>

                <!-- mg cos theta Vector (Radial) -->
                <!-- Direction (100, 170). Adjusted Length ~103. Tip at (452, 288) -->
                <line x1="400" y1="200" x2="452" y2="288" stroke="#1e88e5" stroke-width="2"
                    marker-end="url(#arrowBlue)" />
                <text x="460" y="300" fill="#1e88e5" font-size="12" font-weight="bold" font-family="Arial">mg cos
                    &#x03B8;</text>

                <!-- mg sin theta Vector (Tangential) -->
                <!-- Direction (-170, 100). Adjusted Length ~61. Tip at (348, 231) -->
                <line x1="400" y1="200" x2="348" y2="231" stroke="#d32f2f" stroke-width="2"
                    marker-end="url(#arrowRed)" />
                <text x="260" y="235" fill="#d32f2f" font-size="12" font-weight="bold" font-family="Arial">mg sin
                    &#x03B8;</text>

                <!-- Projection Lines (Dotted Rectangle) -->
                <line x1="452" y1="288" x2="400" y2="320" stroke="#999" stroke-dasharray="3" stroke-width="1" />
                <line x1="348" y1="231" x2="400" y2="320" stroke="#999" stroke-dasharray="3" stroke-width="1" />

                <!-- Angle Theta at Bob -->
                <!-- Between mg (vertical) and mg cos theta (radial extension) -->
                <path d="M 400 240 A 40 40 0 0 0 418 235" fill="none" stroke="#333" />
                <text x="405" y="260" font-size="12" font-weight="bold" font-family="Arial">&#x03B8;</text>

                <!-- Tension -->
                <line x1="400" y1="200" x2="350" y2="115" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
                <text x="360" y="140" font-weight="bold">T</text>
            </svg>
            <p style="font-size: 0.9rem; margin-top: 10px; color: #666;">Figure 13.3: Forces acting on a Simple Pendulum
            </p>
        </div>

        <div class="derivation-box">
            <p><strong>Derivation:</strong></p>
            <p>1. Forces acting on bob: Tension $T$ (along string) and Weight $mg$ (downwards).</p>
            <p>2. Resolve $mg$: along string ($mg \cos\theta$) and perpendicular ($mg \sin\theta$).</p>
            <p>3. Restoring force acts towards mean position: $F_{res} = -mg \sin\theta$.</p>
            <p>4. For small angles ($\theta < 10^\circ$), $\sin\theta \approx \theta$ (in radians). And
                    $\theta=\frac{\text{arc}}{\text{radius}}=\frac{x}{L}$.</p>
                    <p>5. $F_{res} = -mg \frac{x}{L}$.</p>
                    <p>6. Comparing with $F = -kx$, we get effective spring constant $k_{eff} = \frac{mg}{L}$.</p>
                    <p><strong>Time Period:</strong></p>
                    <p>$T = 2\pi \sqrt{\frac{m}{k_{eff}}} = 2\pi \sqrt{\frac{m}{mg/L}}$</p>
                    <div class="highlight-formula">$$ T = 2\pi \sqrt{\frac{L}{g}} $$</div>
                    <ul>
                        <li><strong>Seconds Pendulum:</strong> A pendulum whose period is 2 seconds. Length $L \approx 1
                            \text{ m}$ (on Earth).</li>
                    </ul>
        </div>

        <div class="diagram-container">
            <svg viewBox="0 0 600 400">
                <!-- Support -->
                <rect x="250" y="20" width="100" height="10" fill="#333" />

                <!-- Equilibrium Position -->
                <line x1="300" y1="30" x2="300" y2="300" stroke="#ccc" stroke-dasharray="8" />
                <circle cx="300" cy="300" r="15" fill="none" stroke="#ccc" />
                <text x="290" y="340" fill="#999">Equilibrium</text>

                <!-- Extreme Position Right -->
                <line x1="300" y1="30" x2="400" y2="250" stroke="#333" stroke-width="2" />
                <circle cx="400" cy="250" r="15" fill="#1e88e5" />
                <text x="420" y="250" font-weight="bold">+A</text>

                <!-- Extreme Position Left -->
                <line x1="300" y1="30" x2="200" y2="250" stroke="#333" stroke-width="2" />
                <circle cx="200" cy="250" r="15" fill="#1e88e5" />
                <text x="160" y="250" font-weight="bold">-A</text>

                <!-- Arcs to show motion -->
                <path d="M 200 250 Q 300 320 400 250" fill="none" stroke="#e3f2fd" stroke-width="2"
                    stroke-dasharray="4" />

                <!-- Vector Annotations (Right Bob) -->
                <line x1="400" y1="250" x2="400" y2="320" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrow)" />
                <text x="410" y="310" fill="#d32f2f" font-weight="bold">mg</text>
                <line x1="400" y1="250" x2="350" y2="140" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
                <text x="380" y="180" font-weight="bold">T</text>
            </svg>
            <p class="img-caption">Figure 13.6: Simple Pendulum showing Equilibrium and Extreme Positions.</p>
        </div>

        <div class="derivation-box" style="background:#e3f2fd; border-left: 4px solid #1e88e5;">
            <h3>Physical Pendulum (Compound Pendulum)</h3>
            <p>A rigid body oscillating about a horizontal axis passing through it at some distance from the center of
                mass.</p>
            <p><strong>Time Period:</strong></p>
            <div class="highlight-formula">$$ T = 2\pi \sqrt{\frac{I}{mgl}} $$</div>
            <ul>
                <li>$I$: Moment of Inertia about the axis of rotation ($I = I_{CM} + ml^2$).</li>
                <li>$m$: Mass of the body.</li>
                <li>$l$: Distance between center of mass and pivot point.</li>
            </ul>
        </div>

        <div class="practice-box">
            <span class="practice-header">Topic Practice: Simple Pendulum</span>
            <p><strong>Q1:</strong> A simple pendulum has a time period $T_1$ on Earth ($g=9.8$). It is taken to the
                Moon
                where $g_{moon} = g/6$. What is the new time period?</p>
            <p><strong>Ans:</strong> $T \propto 1/\sqrt{g}$. <br>
                $T_{moon}/T_{earth} = \sqrt{g_{earth} / g_{moon}} = \sqrt{g / (g/6)} = \sqrt{6}$. <br>
                $T_{moon} = \sqrt{6} T_1 \approx 2.45 T_1$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> What is the length of a "Seconds Pendulum" ($T=2s$) on Earth?</p>
            <p><strong>Ans:</strong> $T = 2\pi \sqrt{L/g} \Rightarrow T^2 = 4\pi^2 L/g$. <br>
                $L = g T^2 / 4\pi^2 = (9.8 \times 4) / (4 \times 9.86) \approx 0.993 \approx 1 \text{ meter}$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q3:</strong> A pendulum is suspended in a lift moving up with acceleration $a$. How does the Time
                Period change?</p>
            <p><strong>Ans:</strong> Effective gravity becomes $g_{eff} = g + a$. <br>
                $T = 2\pi \sqrt{L / (g+a)}$. The time period <strong>decreases</strong> (oscillates faster).</p>
        </div>

        <!-- 13.7 Damped & Forced -->
        <h2>13.7 Damped & Forced Oscillations</h2>
        <div class="definition-box">
            <p><strong>1. Free Oscillation:</strong> Oscillation under internal restoring force only. Amplitude remains
                constant (Undamped).</p>

            <p><strong>2. Damped Oscillation:</strong> Amplitude decreases with time due to resistive forces.</p>
            <p><strong>Equation:</strong> $m \frac{d^2x}{dt^2} + b \frac{dx}{dt} + kx = 0$ ($b$ is damping constant).
            </p>
            <p><strong>Amplitude Decay:</strong> $A(t) = A_0 e^{-bt/2m}$.</p>

            <p><strong>Types of Damping:</strong></p>
            <ul>
                <li><strong>Overdamped:</strong> Returns to equilibrium without oscillating (slowly). Large damping.
                </li>
                <li><strong>Critically Damped:</strong> Returns to equilibrium as quickly as possible without
                    oscillating. (Used in car shock absorbers).</li>
                <li><strong>Underdamped:</strong> Oscillates with decreasing amplitude (Most common case).</li>
            </ul>

            <div class="diagram-container">
                <div style="position: relative; height:300px; width:100%">
                    <canvas id="dampedChart"></canvas>
                </div>
                <p class="img-caption">Figure: Damped Harmonic Motion (Amplitude decays exponentially).</p>
            </div>

            <p style="margin-top:10px"><strong>3. Forced Oscillation:</strong> Driven by external periodic force $F(t) =
                F_0 \cos(\omega_d t)$.</p>
            <p><strong>Equation of Motion:</strong></p>
            <div class="highlight-formula">$$ m\frac{d^2x}{dt^2} + b\frac{dx}{dt} + kx = F_0 \cos(\omega_d t) $$</div>

            <p><strong>Resonance:</strong> When driving frequency matches natural frequency ($\omega_d \approx
                \omega_n$). </p>
            <p>Amplitude becomes maximum: $A_{max} \approx \frac{F_0}{b\omega}$. Sharp resonance occurs for small
                damping $b$.</p>
        </div>

        <div class="diagram-container">
            <div style="position: relative; height:300px; width:100%">
                <canvas id="resonanceChart"></canvas>
            </div>
            <p class="img-caption">Figure: Resonance Curve showing variation of Amplitude with Driving Frequency.</p>
        </div>

        <div class="diagram-container">
            <svg viewBox="0 0 600 250">
                <!-- Axes -->
                <line x1="50" y1="230" x2="550" y2="230" stroke="#333" stroke-width="2" />
                <line x1="50" y1="230" x2="50" y2="20" stroke="#333" stroke-width="2" />
                <text x="500" y="245" font-weight="bold">Frequency ($\omega$)</text>
                <text x="20" y="30" font-weight="bold">Amplitude</text>

                <!-- Resonance Curve -->
                <path d="M50 220 Q 200 220 300 50 Q 400 220 550 220" fill="none" stroke="#d32f2f" stroke-width="3" />
                <line x1="300" y1="230" x2="300" y2="50" stroke="#555" stroke-dasharray="4" />
                <text x="300" y="245" font-weight="bold" fill="#d32f2f">$\omega_0$ (Reasonance)</text>

                <text x="320" y="80" font-size="12" fill="#d32f2f">Max Amplitude</text>
            </svg>
            <p style="font-size: 0.9rem; margin-top: 10px; color: #666;">Figure 13.4: Resonance Curve</p>
        </div>

        <div class="practice-box">
            <span class="practice-header">Topic Practice: Damped & Forced</span>
            <p><strong>Q1:</strong> What is the effect of damping on the amplitude and frequency of an oscillator?</p>
            <p><strong>Ans:</strong> Amplitude decreases exponentially with time: $A(t) = A_0 e^{-bt/2m}$. <br>
                Frequency decreases slightly: $\omega' = \sqrt{k/m - (b/2m)^2}$.</p>
            <hr style="border-top: 1px dashed #2e7d32; margin: 10px 0;">
            <p><strong>Q2:</strong> Distinguish between Free, Force, and Resonant Oscillations.</p>
            <p><strong>Ans:</strong>
                (1) Free: Vibrates with natural frequency, no external force. <br>
                (2) Forced: Driven by external periodic force, vibrates with frequency of driver. <br>
                (3) Resonance: Special case of forced oscillation where Driver Frequency = Natural Frequency. Amplitude
                is
                maximum.</p>
        </div>

        <!-- 13.8 Important Definitions -->
        <h2>13.8 Important Definitions</h2>
        <div class="definition-box">
            <ul>
                <li><strong>Epoch (Initial Phase):</strong> The phase at $t=0$ ($\phi$). It determines the starting
                    position and direction of motion.</li>
                <li><strong>Restoring Force:</strong> Detailed as the force that brings the body back to equilibrium. $F
                    \propto -x$.</li>
                <li><strong>Mechanical Energy Conservation:</strong> Total energy ($K+U$) in SHM (undamped) is constant
                    and independent of time.</li>
            </ul>
        </div>



        <!-- 13.9 Numerical Examples -->
        <h2>13.9 Solved Examples</h2>
        <div class="practice-box">
            <span class="practice-header">Example 1: Displacement Equation</span>
            <p><strong>Q:</strong> A body oscillates with SHM according to the equation $x = 5 \cos(2\pi t + \pi/4)$.
                Find (a) Amplitude, (b) Time Period, (c) Initial Phase.</p>
            <p><strong>Sol:</strong> Compare with $x = A \cos(\omega t + \phi)$.</p>
            <p>(a) $A = 5 \text{ m}$ (assuming SI).</p>
            <p>(b) $\omega = 2\pi$. Since $\omega = 2\pi/T \Rightarrow 2\pi/T = 2\pi \Rightarrow T = 1 \text{ s}$.</p>
            <p>(c) Initial Phase $\phi = \pi/4$ rad.</p>
        </div>

        <div class="practice-box">
            <span class="practice-header">Example 2: Spring System</span>
            <p><strong>Q:</strong> A mass of 2kg is attached to a spring of constant $k = 200 \text{ N/m}$. Calculate
                the frequency of oscillation.</p>
            <p><strong>Sol:</strong> $m = 2 \text{ kg}$, $k = 200 \text{ N/m}$.</p>
            <p>$\nu = \frac{1}{2\pi} \sqrt{\frac{k}{m}} = \frac{1}{2\pi} \sqrt{\frac{200}{2}} = \frac{1}{2\pi}
                \sqrt{100} = \frac{10}{2\pi} \approx 1.59 \text{ Hz}$.</p>
        </div>

        <div class="practice-box">
            <span class="practice-header">Example 3: Pendulum Change</span>
            <p><strong>Q:</strong> The length of a simple pendulum is increased by 44%. What is the percentage increase
                in its time period?</p>
            <p><strong>Sol:</strong> $T \propto \sqrt{L}$. Let initial length be $L$. New length $L' = L + 0.44L =
                1.44L$.</p>
            <p>$T' \propto \sqrt{1.44L} = 1.2 \sqrt{L} = 1.2 T$.</p>
            <p>Increase $= T' - T = 0.2T$.</p>
            <p>% Increase $= \frac{0.2T}{T} \times 100 = 20\%$.</p>
        </div>

        <!-- 13.10 Practice Questions -->
        <h2>13.10 Practice Questions</h2>
        <div class="practice-box">
            <ol>
                <li><strong>[Conceptual]</strong> Can a motion be periodic but not oscillatory? Give an example.</li>
                <li><strong>[Conceptual]</strong> At what points is the velocity of a particle in SHM zero?</li>
                <li><strong>[Numerical]</strong> A body executes SHM with an amplitude of 10 cm and a period of 4 s.
                    Find the speed at 5 cm from the mean position.</li>
                <li><strong>[Numerical]</strong> Two springs of constants $k_1$ and $k_2$ are connected in series.
                    Derive the expression for the effective spring constant.</li>
                <li><strong>[Long Answer]</strong> Prove that the total mechanical energy of a particle executing simple
                    harmonic motion is conserved. Plot the graphs of KE and PE.</li>
                <li><strong>[Derivation]</strong> Show that the motion of a simple pendulum is simple harmonic for small
                    angles of oscillation.</li>
            </ol>
        </div>

        <div class="master-tip">
            <p><strong>Master Strategy:</strong> For SHM problems, always identify $\omega$ first. Most quantities ($v,
                a, T, K, U$) depend on $\omega$. Remember $\omega = \sqrt{k/m}$ for springs and $\omega = \sqrt{g/L}$
                for pendulums.</p>
        </div>

    </div>
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            html.classList.toggle('dark-mode');
            localStorage.setItem('theme', html.classList.contains('dark-mode') ? 'dark' : 'light');
            updateChartsTheme();
        }
        // Initialize Theme - Default to LIGHT
        if (localStorage.getItem('theme') === 'dark') {
            document.documentElement.classList.add('dark-mode');
        }

        // --- Chart.js Implementations ---

        // Common Chart Options
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: '#333',
                        font: { family: 'Outfit', size: 12 }
                    }
                }
            },
            scales: {
                x: {
                    grid: { color: 'rgba(0,0,0,0.1)' },
                    ticks: { color: '#333' }
                },
                y: {
                    grid: { color: 'rgba(0,0,0,0.1)' },
                    ticks: { color: '#333' },
                    beginAtZero: true
                }
            }
        };

        // 1. Damped Oscillation Chart
        const ctxDamped = document.getElementById('dampedChart').getContext('2d');

        // Generate Data
        const timePoints = [];
        const displacement = [];
        const envelopeTop = [];
        const envelopeBottom = [];
        for (let t = 0; t <= 50; t += 0.5) {
            timePoints.push(t);
            // x = A * e^(-bt/2m) * cos(wt)
            // Let A=10, b/2m = 0.05, w = 1
            const decay = 10 * Math.exp(-0.05 * t);
            displacement.push(decay * Math.cos(t));
            envelopeTop.push(decay);
            envelopeBottom.push(-decay);
        }

        const dampedChart = new Chart(ctxDamped, {
            type: 'line',
            data: {
                labels: timePoints,
                datasets: [
                    {
                        label: 'Displacement x(t)',
                        data: displacement,
                        borderColor: '#1e88e5',
                        borderWidth: 2,
                        tension: 0.4,
                        pointRadius: 0
                    },
                    {
                        label: 'Envelope',
                        data: envelopeTop,
                        borderColor: '#d32f2f',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false
                    },
                    {
                        label: 'Envelope',
                        data: envelopeBottom,
                        borderColor: '#d32f2f',
                        borderWidth: 1,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false
                    }
                ]
            },
            options: {
                ...commonOptions,
                plugins: {
                    title: {
                        display: true,
                        text: 'Damped Harmonic Motion',
                        color: '#333',
                        font: { family: 'Outfit', size: 16 }
                    }
                },
                scales: {
                    x: {
                        title: { display: true, text: 'Time (t)', color: '#333' },
                        ticks: { display: false } // Hide numbers for abstract graph
                    },
                    y: {
                        title: { display: true, text: 'Displacement (x)', color: '#333' },
                        ticks: { display: false }
                    }
                }
            }
        });

        // 2. Resonance Chart
        const ctxResonance = document.getElementById('resonanceChart').getContext('2d');

        // Generate Resonance Data (Lorentzian-like curves)
        // A = F0 / sqrt( (w^2 - w0^2)^2 + (bw)^2 )
        const freqPoints = [];
        const smallDamping = [];
        const largeDamping = [];

        const w0 = 50; // Resonance frequency center
        for (let w = 0; w <= 100; w += 1) {
            freqPoints.push(w);

            // Small Damping (b = 5)
            const den1 = Math.sqrt(Math.pow(w * w - w0 * w0, 2) + Math.pow(5 * w, 2));
            smallDamping.push(2000 / (den1 + 10)); // +10 to avoid infinity

            // Large Damping (b = 20)
            const den2 = Math.sqrt(Math.pow(w * w - w0 * w0, 2) + Math.pow(20 * w, 2));
            largeDamping.push(2000 / (den2 + 10));
        }

        const resonanceChart = new Chart(ctxResonance, {
            type: 'line',
            data: {
                labels: freqPoints,
                datasets: [
                    {
                        label: 'Small Damping (Sharp Resonance)',
                        data: smallDamping,
                        borderColor: '#d32f2f', // Red
                        borderWidth: 2,
                        pointRadius: 0,
                        tension: 0.4
                    },
                    {
                        label: 'Large Damping (Flat Resonance)',
                        data: largeDamping,
                        borderColor: '#1976d2', // Blue
                        borderWidth: 2,
                        pointRadius: 0,
                        borderDash: [5, 5],
                        tension: 0.4
                    }
                ]
            },
            options: {
                ...commonOptions,
                plugins: {
                    title: {
                        display: true,
                        text: 'Amplitude vs Driving Frequency',
                        color: '#333',
                        font: { family: 'Outfit', size: 16 }
                    },
                    tooltip: { enabled: true }
                },
                scales: {
                    x: {
                        title: { display: true, text: 'Driving Frequency (ωd)', color: '#333' },
                        ticks: {
                            callback: function (val, index) {
                                // Label only the resonance peak (approx index 50)
                                return index === 50 ? 'ω0' : '';
                            },
                            color: '#d32f2f',
                            font: { weight: 'bold' }
                        }
                    },
                    y: {
                        title: { display: true, text: 'Amplitude (A)', color: '#333' },
                        ticks: { display: false }
                    }
                }
            }
        });

        // Function to update chart colors for Dark Mode
        function updateChartsTheme() {
            const isDark = document.documentElement.classList.contains('dark-mode');
            const textColor = isDark ? '#e0e0e0' : '#333';
            const gridColor = isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)';

            [dampedChart, resonanceChart].forEach(chart => {
                chart.options.scales.x.grid.color = gridColor;
                chart.options.scales.x.ticks.color = textColor;
                chart.options.scales.x.title.color = textColor;
                chart.options.scales.y.grid.color = gridColor;
                chart.options.scales.y.ticks.color = textColor;
                chart.options.scales.y.title.color = textColor;
                chart.options.plugins.legend.labels.color = textColor;
                chart.options.plugins.title.color = textColor;
                chart.update();
            });
        }

        // Initial call to set correct colors if starting in dark mode
        updateChartsTheme();

    </script>
    <script>
        // Common Desmos Options
        const desmosOptions = {
            expressions: false,
            settingsMenu: false,
            keypad: false,
            zoomButtons: false,
            lockViewport: true,
            xAxisLabel: 'Time (t)',
            yAxisLabel: 'Amplitude',
            xAxisStep: 1.57, // Pi/2 steps approx
        };
        // --- Figure 13.2b: Displacement ---
        let calc13_2 = null; // Lifted scope for animation sync
        const elt13_2 = document.getElementById('calculator_13_2');
        if (elt13_2 && typeof Desmos !== 'undefined') {
            calc13_2 = Desmos.GraphingCalculator(elt13_2, { ...desmosOptions, xAxisLabel: 't', yAxisLabel: 'x', lockViewport: true });
            // Plot x = A cos(wt). We use A=1 (normalized) for graph, w=2 (from animation).
            // Desmos y is Displacement, x is Time.
            calc13_2.setExpression({ id: 'graph1', latex: 'y=\\cos(2x)', color: '#1e88e5' });

            // Moving Point P(T, cos(2T))
            calc13_2.setExpression({ id: 'param_T', latex: 'T=0' }); // Time parameter
            calc13_2.setExpression({ id: 'point_P', latex: '(T, \\cos(2T))', color: '#d32f2f', pointStyle: 'POINT' });

            // Initial Bounds
            calc13_2.setMathBounds({ left: 0, right: 10, bottom: -1.5, top: 1.5 });
        }

        // --- SVG Animations ---
        (function () {
            // Function to animate Horizontal Spring (Fig 13.2a)
            // Function to animate Horizontal Spring (Fig 13.2a)
            function animateHorizontalSpring() {
                const spring = document.getElementById('anim_horiz_spring');
                const mass = document.getElementById('anim_horiz_mass');
                const massLabel = document.getElementById('anim_horiz_mass_label'); // 'm'
                const currentXLabel = document.getElementById('anim_horiz_current_x'); // 'x(t)'

                if (!spring || !mass) return;

                const wallX = 20; // Fixed wall position
                // Visual Center is at x=280 (from equilibrium marker)
                // Mass width is 60. Center at 280 => Left Edge at 280 - 30 = 250.
                const equilibriumLeftX = 250;
                const massWidth = 60;

                // Amplitude A = 80px. 
                // Right Extent (Center): 280 + 80 = 360 (+A marker)
                // Left Extent (Center): 280 - 80 = 200 (-A marker)
                const amplitude = 80;

                const omega = 1.5; // rad/s (Adjusted for clear visualization)
                let startTime = null;

                function step(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = (timestamp - startTime) / 1000;

                    // SHM: x(t) = A cos(wt)
                    // This calculates displacement from equilibrium
                    const displacementPx = amplitude * Math.cos(omega * elapsed);

                    // Current Left Edge Position
                    const currentLeftX = equilibriumLeftX + displacementPx;

                    // Current Center Position (for labels)
                    const currentCenterX = currentLeftX + (massWidth / 2);

                    // Update Mass Position (rect x is left edge)
                    mass.setAttribute('x', currentLeftX);

                    // Update Label 'm' (center of mass)
                    if (massLabel) massLabel.setAttribute('x', currentCenterX);

                    // Update Label 'x(t)' (Track mass)
                    if (currentXLabel) currentXLabel.setAttribute('x', currentCenterX);

                    // Update Spring Path
                    // Spring goes from Wall (20, 70) to Mass Left Edge (currentLeftX, 70)
                    const L = currentLeftX - wallX;
                    const coils = 12;
                    const stepX = L / coils;
                    let d = `M ${wallX} 70`;

                    for (let i = 0; i < coils; i++) {
                        const startX = wallX + i * stepX;
                        const midX = startX + stepX / 2;
                        const endX = startX + stepX;
                        // Quadratic Bezier curves for coils
                        d += ` Q ${startX + stepX / 4} 55 ${midX} 70`;
                        d += ` Q ${startX + 3 * stepX / 4} 85 ${endX} 70`;
                    }
                    spring.setAttribute('d', d);

                    // Update Desmos Graph Sync
                    if (typeof calc13_2 !== 'undefined' && calc13_2) {
                        try {
                            // Update Time Parameter T
                            calc13_2.setExpression({ id: 'param_T', latex: 'T=' + elapsed.toFixed(3) });

                            // Scroll Viewport (Follow T)
                            // Keep T around 20% from left to see history, or center
                            if (elapsed > 2) {
                                calc13_2.setMathBounds({
                                    left: elapsed - 2,
                                    right: elapsed + 8,
                                    bottom: -1.5,
                                    top: 1.5
                                });
                            }
                        } catch (e) {
                            // Ignore errors to prevent animation stop
                        }
                    }

                    requestAnimationFrame(step);
                }
                requestAnimationFrame(step);
            }

            // Function to animate Reference Circle (Fig 13.2.1)
            function animateReferenceCircle() {
                const particleP = document.getElementById('anim_ucm_particle');
                const radiusLine = document.getElementById('anim_ucm_radius');
                const particleLabel = document.getElementById('anim_ucm_label');
                const projLine = document.getElementById('anim_ucm_proj_line');
                const projM = document.getElementById('anim_ucm_projection');
                const shmParticle = document.getElementById('anim_shm_particle');
                const shmVector = document.getElementById('anim_shm_vector');
                const connectionLine = document.getElementById('anim_connection_line');

                if (!particleP) return;

                const R = 100; // Radius of the reference circle
                const omega = 1.0; // rad/s
                let startTime = null;

                // Center of Reference Circle is (0,0) inside the <g>
                // Right SHM center is (0,0) inside its <g>

                // Global Coordinates for Connection Line
                // Left Group Translate: (150, 125)
                // Right Group Translate: (450, 125)

                function step(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = (timestamp - startTime) / 1000;

                    // Anticlockwise Rotation: Angle increases positively
                    // SVG Y is down, so (x, y) = (R cos(theta), -R sin(theta))
                    const angle = omega * elapsed;

                    const px = R * Math.cos(angle);
                    const py = -R * Math.sin(angle); // Negative Y for upper half (Anticlockwise)

                    // Update P (Red Dot on Circle)
                    particleP.setAttribute('cx', px);
                    particleP.setAttribute('cy', py);

                    // Update Radius Line
                    if (radiusLine) {
                        radiusLine.setAttribute('x2', px);
                        radiusLine.setAttribute('y2', py);
                    }

                    // Update Label P
                    if (particleLabel) {
                        particleLabel.setAttribute('x', px + 10);
                        particleLabel.setAttribute('y', py - 10);
                    }

                    // Update Projection M (Blue Dot on x-axis)
                    if (projM) projM.setAttribute('cx', px);

                    // Update Projection Line (Dashed)
                    if (projLine) {
                        projLine.setAttribute('x1', px);
                        projLine.setAttribute('y1', py);
                        projLine.setAttribute('x2', px);
                        // y2 is 0 (axis)
                    }

                    // Update Right Side SHM Particle (Blue Dot)
                    if (shmParticle) {
                        shmParticle.setAttribute('cx', px);
                    }

                    // Update Right Side Vector (Restoring Force vector)
                    // F = -kx. Force is always opposite to displacement.
                    if (shmVector) {
                        // Force is proportional to negative displacement
                        // x = px
                        // Vector length proportional to px
                        const forceScale = 0.8; // Adjust visual length

                        // Vector starts at particle center (px)
                        shmVector.setAttribute('x1', px);

                        // Vector points towards mean (0). 
                        // If px is positive (right), vector should point left (negative dx)
                        // Vector magnitude = px * scale
                        // End point = px - (px * scale)
                        // If px > 0 (right), end < px (points left)
                        // If px < 0 (left), end > px (points right) 

                        shmVector.setAttribute('x2', px - (px * forceScale));
                    }

                    // Update Connection Line (Between diagrams)
                    if (connectionLine) {
                        const x1 = 150 + px;
                        const y1 = 125 + py;
                        const x2 = 450 + px;
                        const y2 = 125;
                        connectionLine.setAttribute('d', `M ${x1} ${y1} L ${x2} ${y2}`);
                    }

                    requestAnimationFrame(step);
                }
                requestAnimationFrame(step);
            }

            // Function to animate Bowl (Fig 13.10)
            function animateBowlBall() {
                const ball = document.getElementById('anim_bowl_ball');
                const arrow = document.getElementById('anim_bowl_arrow');
                const label = document.getElementById('anim_bowl_force_label');

                if (!ball) return;

                // Bowl Geometry
                // Outer arc from 50,50 to 350,50 with R=150
                // Center calculated previously as (200, 50)
                const cx = 200;
                const cy = 50;
                const R = 150;
                // Bottom is at (200, 200) -> Angle 90 deg (PI/2) from standard 0 at (200, 50) going right?
                // Standard SVG: 0 is Right, 90 is Down.
                // So Mean Position is at PI/2.

                const omega = 2.0;
                const maxTheta = 0.6; // ~34 degrees amplitude
                const meanTheta = Math.PI / 2;

                let startTime = null;

                function step(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = (timestamp - startTime) / 1000;

                    // Angle Oscillation
                    // theta(t) = mean + A cos(wt)
                    // If we start at extent, use cos.
                    const currentTheta = meanTheta + maxTheta * Math.cos(omega * elapsed);

                    const x = cx + R * Math.cos(currentTheta);
                    const y = cy + R * Math.sin(currentTheta);

                    ball.setAttribute('cx', x);
                    ball.setAttribute('cy', y);

                    // Arrow: Points towards mean position along the arc?
                    // Actually, restoring force is Tangential mg sin(theta).
                    // Visualizing it as an arc segment from ball to bottom is illustrative.
                    // Or a tangent vector? The user image showed a curved arrow.

                    if (arrow) {
                        // Draw arc from current (x,y) to bottom (200, 200)
                        // If we are at bottom, arrow vanishes.
                        const dist = Math.abs(currentTheta - meanTheta);
                        if (dist < 0.05) {
                            arrow.setAttribute('d', ''); // Hide if close to mean
                            if (label) label.setAttribute('opacity', '0');
                        } else {
                            if (label) label.setAttribute('opacity', '1');
                            // Determine sweep flag
                            // If theta < PI/2 (Left side), we need to go to PI/2 (Right/CW? No, increasing angle)
                            // SVG Arc:
                            // M startX startY A rx ry x-axis-rot large-arc-flag sweep-flag endX endY
                            // Sweep 1 = positive angle direction (CW in SVG coords).
                            // Sweep 0 = negative angle direction (CCW).

                            // If currentTheta < meanTheta (Left side): We want to go to meanTheta (Increase angle). So Sweep 1.
                            // If currentTheta > meanTheta (Right side): We want to go to meanTheta (Decrease angle). So Sweep 0.

                            const sweep = (currentTheta < meanTheta) ? 1 : 0;

                            // Let's make the arrow tip end a bit before the bottom so it doesn't look cluttered
                            // Or just go to bottom
                            const endX = 200;
                            const endY = 200; // Bottom

                            // Adjust R slightly for arrow so it doesn't overlap ball path perfectly? 
                            // Or keep same R.
                            const arrowR = R - 10; // slightly inside

                            // Calculate start point for arrow on this inner radius
                            const ax = cx + arrowR * Math.cos(currentTheta);
                            const ay = cy + arrowR * Math.sin(currentTheta);

                            // Calculate end point (bottom of inner radius)
                            const aEndX = cx + arrowR * Math.cos(meanTheta); // 200
                            const aEndY = cy + arrowR * Math.sin(meanTheta); // 50+140=190

                            const d = `M ${ax} ${ay} A ${arrowR} ${arrowR} 0 0 ${sweep} ${aEndX} ${aEndY}`;
                            arrow.setAttribute('d', d);

                            // Move label
                            if (label) {
                                label.setAttribute('x', (ax + aEndX) / 2);
                                label.setAttribute('y', (ay + aEndY) / 2 - 10);
                            }
                        }
                    }

                    requestAnimationFrame(step);
                }
                requestAnimationFrame(step);
            }

            // Initialize
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    animateHorizontalSpring();
                    animateReferenceCircle();
                    animateBowlBall();
                });
            } else {
                animateHorizontalSpring();
                animateReferenceCircle();
                animateBowlBall();
            }
        })();
    </script>
</body>

</html>